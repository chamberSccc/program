<!DOCTYPE html>
<html lang="zh-cn">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
  <meta name="renderer" content="webkit" /> 
  <title>会员注册</title> 
  <link rel="stylesheet" href="../css/pintuer.css" /> 
  <link rel="stylesheet" href="../css/admin.css" /> 
  <link href="../dist/bootstrap/css/bootstrap.min.css" rel="stylesheet" /> 
  <link href="../dist/css/sb-admin-2.min.css" rel="stylesheet" /> 
  <script src="../js/jquery.js"></script> 
  <script src="../js/pintuer.js"></script> 
  <script src="../dist/bootstrap/js/bootstrap.min.js"></script> 
 </head> 
 <body> 
  <div style="min-height: 768px" class="panel admin-panel"> 
   <div class="panel-head">
    <strong><span class="icon-pencil-square-o"></span> 会员注册</strong>
   </div> 
   <div class="body-content"> 
    <form class="form-horizontal" role="form"> 
     <div> 
      <div class="form-group"> 
       <label class="control-label col-sm-2">会员昵称：</label> 
       <div class="col-sm-4 form-inline"> 
        <input id="nickname" class="form-control input-sm;" value="" style="width:148px;" /> 
        <i class="text-danger">(*必填)</i> 
       </div> 
      </div> 
      <div class="form-group"> 
       <label class="control-label col-sm-2">推荐编号：</label> 
       <div class="col-sm-4 form-inline"> 
        <input id="recommendid" class="form-control input-sm;" value="" style="width:148px;" /> 
        <i class="text-danger">(*必填)</i> 
       </div> 
      </div> 
      <!--
      <div class="form-group"> 
		  <label class="control-label col-sm-2">接点位置：</label> 
       <div class="col-sm-4 form-inline"> 
        <label class="radio-inline"> <input type="radio" name="optionsRadiosInline" id="optionsRadiosInline1" value="option1" checked="" />A区</label> 
        <label class="radio-inline"> <input type="radio" name="optionsRadiosInline" id="optionsRadiosInline2" value="option2" />B区 </label> 
        <i class="text-danger">(*必填)</i>
       </div> 
      </div> 
--> 
      <div class="form-group"> 
       <label class="control-label col-sm-2">一级密码：</label> 
       <div class="col-sm-4 form-inline"> 
        <input id="password" type="password" class="form-control input-sm;" value="" style="width:148px;" /> 
        <i class="text-danger">(*必填)</i> 
       </div> 
      </div> 
      <div class="form-group"> 
       <label class="control-label col-sm-2">二级密码：</label> 
       <div class="col-sm-4 form-inline"> 
        <input id="password1" type="password" class="form-control input-sm;" value="" style="width:148px;" /> 
        <i class="text-danger">(*必填)</i> 
       </div> 
      </div> 
      <!--
      <div class="form-group"> 
       <div class="form-group form-group-sm col-sm-6 form-inline"> 
         <label class="col-sm-offset-2">开户银行：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label> <select size="1" style="width:148px;" class="form-control"> <option>中国农业银行</option> <option>中国工商银行</option><option>中国建设银行</option> </select>
         <i class="text-danger">(*必填)</i>
       </div> 
      </div>
--> 
      <div class="form-group"> 
       <label class="control-label col-sm-2">身份证号：</label> 
       <div class="col-sm-4 form-inline"> 
        <input id="idnumber" type="number" class="form-control input-sm;" value="" style="width:148px;" /> 
        <i class="text-danger">(*必填)</i> 
       </div> 
      </div> 
      <div class="form-group"> 
       <label class="control-label col-sm-2">真实姓名：</label> 
       <div class="col-sm-4 form-inline"> 
        <input id="username" class="form-control input-sm;" value="" style="width:148px;" /> 
        <i class="text-danger">(*必填)</i> 
       </div> 
      </div> 
      <div class="form-group"> 
       <label class="control-label col-sm-2">联系电话：</label> 
       <div class="col-sm-4 form-inline"> 
        <input id="phone" type="number" class="form-control input-sm;" value="" style="width:148px;" /> 
        <i class="text-danger">(*必填)</i> 
       </div> 
      </div> 
      <div class="form-group"> 
       <label class="control-label col-sm-2">收货地址：</label> 
       <div class="col-sm-4 form-inline"> 
        <input id="address" class="form-control input-sm;" value="" style="width:228px;" /> 
        <i class="text-danger">(*必填)</i> 
       </div> 
      </div> 
      <button type="button" id="btn-register" class="button col-sm-offset-4 bg-main icon-check-square-o">立即注册</button> 
     </div> 
    </form> 
   </div> 
  </div> 
<script type="text/javascript">
	   jQuery(function($){
				$('#btn-register').on('click', function(){
				var nickname = $("#nickname").val(); 
				if (nickname ==''){
					alert('请输入您的用户昵称')
					return;
				}
				var recommendid  = $("#recommendid").val();  
				if (recommendid ==''){
					alert('请输入您的推荐人编号')
					return;
				}				
				var password = $("#password").val(); 
				if (password ==''){
					alert('请输入您的密码')
					return;
				}			 
				var password1  = $("#password1").val();  
				if (password1 ==''){
					alert('请输入您的二级密码')
					return;
				}	
				if(password.length <8 || password1.length <8){
					alert('密码长度应至少为8位');
					return;
				}				
				var idnumber = $("#idnumber").val();  
				if (idnumber ==''){
					alert('请输入您的身份证号')
					return;
				}				
				var username  = $("#username").val();  
				if (username ==''){
					alert('请输入您的真实姓名')
					return;
				}				
				var phone = $("#phone").val();  
				if (phone ==''){
					alert('请输入您的联系电话')
					return;
				}				
				var address  = $("#address").val();    	
				if (address ==''){
					alert('请输入您的收货地址')
					return;
				}	
				var data = {
				"nickname" : nickname,
				"recommendid" : recommendid,
				"password" : password,
				"password1" : password1,
				"idnumber" : idnumber,
				"username" : username,
				"phone" : phone,
				"address" : address
				};			
				var requestURL = "../../DanboBusiness/user/addUser";
				$.ajax({
				type : "POST",
				url : requestURL,
				data : JSON.stringify(data), //必须转成JSON进行传递，否则会报code 117错误
				cache : false,
				dataType : "json", //后台返回值类型
				contentType : "application/json",
				success : function(resultData, textStatus) {
					if(resultData.message.substring(0, 7) == 'success'){
						alert('注册成功,您的会员编号为'+resultData.message.substring(7));
						$("#nickname").val('');
						$("#recommendid").val(''); 
						$("#password").val(''); 
						$("#password1").val(''); 
						$("#idnumber").val(''); 
						$("#username").val('');  
						$("#phone").val(''); 
						$("#address").val('');  
					}else if(resultData.message == 'redundIdNumber'){
						alert('您的身份证号码已被使用');
					}else if(resultData.message == 'errorParam'){
						alert('生产会员编号失败');
					}

				  }
				});
				
			  });
			});
    </script>

 </body>
</html>